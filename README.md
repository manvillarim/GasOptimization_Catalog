# GAS OPTIMIZATION CATALOG

This repository contains a series of transformations and techniques that aim to optimize gas consumption in solidity smart contracts.

| Transformation | Definition | Proof of Correctness | Source |
|---|---|---|---|
| Replace require with custom errors | [definition](definition/requiretoerror.png) | [Proof](certora/replace-require-with-custom-errors/replace-require-with-custom-errors.md) | [source](https://soliditylang.org/blog/2021/04/21/custom-errors/) |
| Refactoring loops with repeated storage calls | [definition](definition/loopsstorage.png) | [Proof](certora/refactoring-loops-with-repeated-storage-calls/refactoring-loops-with-repeated-storage-calls.md) | [source](https://www.cs.toronto.edu/~fanl/papers/gas-brain21.pdf) |
| Refactoring loops with a constant comparison | [definition](definition/loopscomparision.png) | [Proof](certora/refactoring-loops-with-a-constant-comparison/refactoring-loops-with-a-constant-comparison.md) | [source](https://www.cs.toronto.edu/~fanl/papers/gas-brain21.pdf) |
| Refactoring loops with repeated computations | [definition](definition/loopscomputation.png) | [Proof](certora/refactoring-loops-with-repeated-computations/refactoring-loops-with-repeated-computations.md) | [source](https://www.cs.toronto.edu/~fanl/papers/gas-brain21.pdf) |
| Struct Packing | [definition](definition/structpacking.png) |[Proof](certora/struct-packing/struct-packing.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| State Variable Packing | [definition](definition/variablepacking.png) | [Proof](certora/state-variable-packing/state-variable-packing.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Boolean Packing | [definition](definition/booleanpacking.png) | [Proof](certora/boolean-packing/boolean-packing.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use fixed-size arrays instead of dynamic arrays | [definition](definition/fixedsizearray.png) | [Proof](certora/fixed-size-arrays/fixed-size-arrays.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Avoid explicit zero initialization | [definition](definition/zeroinitialization.png) | [Proof](certora/avoid-zero-initialization/avoid-zero-initialization.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use calldata instead of memory for function parameters | [definition](definition/calldata.png) | [Proof](certora/calldata-vs-memory/calldata-vs-memory.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Delete unused storage variables | [definition](definition/deletevariables.png) | [Proof](certora/delete-storage-variables/delete-storage-variables.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use appropriate function visibility | [definition](definition/functionvisibility.png) | [Proof](certora/function-visibility/function-visibility.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use constant variables for unchanging values | [definition](definition/constantvariables.png) | [Proof](certora/constant-variables/constant-variables.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use immutable variables for constructor-set values | [definition](definition/immutablevariables.png) | [Proof](certora/immutable-variables/immutable-variables.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Reduce mathematical expressions | [definition](definition/reducemath.png) | [Proof](certora/reduce-expressions/reduce-expressions.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use short-circuiting for conditional expressions | [definition](definition/shortcircuiting.png) | [Proof](certora/short-circuiting/short-circuiting.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Write values directly instead of calculating | [definition](definition/writevalues.png) | [Proof](certora/write-values-directly/write-values-directly.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use single-line variable swapping | [definition](definition/singlelineswap.png) | [Proof](certora/single-line-swap/single-line-swap.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Limit number of functions | [definition](definition/limitfunctions.png) | [Proof](certora/limit-functions/limit-functions.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Limit number of modifiers | [definition](definition/limitmodifiers.png) | [Proof](certora/limit-modifiers/limit-modifiers.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Avoid nested loops | [definition](definition/nestedloops.png) | [Proof](certora/avoid-nested-loops/avoid-nested-loops.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Combine multiple loops into one | [definition](definition/combineloops.png) | [Proof](certora/combine-loops/combine-loops.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Avoid repetitive arithmetic operations in loops | [definition](definition/repetitiveloops.png) | [Proof](certora/avoid-arithmetic-in-loops/avoid-arithmetic-in-loops.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Cache storage variables in loops | [definition](definition/cachestorage.png) | [Proof](certora/cache-storage-variables/cache-storage-variables.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Cache array member variables | [definition](definition/cachemember.png) | [Proof](certora/cache-member-variables/cache-member-variables-verification.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Cache array length in loops | [definition](definition/cachelength.png) | [Proof](certora/cache-array-length/cache-array-length.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use efficient loop increment (++ instead of +=1) | [definition](definition/efficientloops.png) | [Proof](certora/efficient-loop-increment/efficient-loop-increment-verification.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |
| Use mappings instead of arrays for data lists | [definition](definition/mappingarray.png) | [Proof](certora/mappings-vs-arrays/mappings-vs-arrays.md) | [source](https://ieeexplore.ieee.org/abstract/document/10429984?casa_token=sUZr-rcNR6EAAAAA:O7umjAqgUcAn7MeBgEQyHAVLXswsqWxqWRApNnohmvrftoqDah-WVghsCu1jV3ZHdCU5Bb4EXsQ) |